{% include strap-jekyll/default/vars.html %}

<ul class="posts">
  {% for post in site.posts %}
    <li class="post">
      <a href="{{ site.base_url }}{{ post.url }}" title="{{ post.date | date_to_string }}">{{ post.title }}</a>
      <span class="post-meta">
        {% capture category_size %}{{ post.categories | size }}{% endcapture %}
        {% if category_size != '0' %}
          <span class="post-categories">
            {% for category in post.categories %}
              <div class="btn-group">
                <button class="btn btn-mini btn-inverse">
                  {{ category }}
                </button>
              </div>
            {% endfor %}
          </span>
        {% endif %}
        {% capture tag_size %}{{ post.tags | size }}{% endcapture %}
        {% if tag_size != '0' %}
          <span class="post-tags">
            {% for tag in post.tags %}
              <div class="btn-group">
                <button class="btn btn-mini">
                  {{ tag }}
                </button>
              </div>
            {% endfor %}
          </span>
        {% endif %}
      </span>
    </li>

    {% if post.next %}
      {% capture yearmonth %}{{ post.date | date: '%Y %m' }}{% endcapture %}
      {% capture nyearmonth %}{{ post.next.date | date: '%Y %m' }}{% endcapture %}
      {% if yearmonth != nyearmonth %}
        </ul>
        <h3>{{ post.next.date | date: '%Y m' }}</h3>
        <ul class="posts">
      {% endif %}
    {% endif %}
  {% endfor %}
</ul>
